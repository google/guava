<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (25) -->
<title>ServiceManager (Guava: Google Core Libraries for Java 999.0.0-HEAD-jre-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: com.google.common.util.concurrent, class: ServiceManager">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ServiceManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../search.html">Search</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">com.google.common.util.concurrent</a></li>
<li><a href="ServiceManager.html" class="current-selection">ServiceManager</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#nested-class-summary" tabindex="0">Nested Class Summary</a></li>
<li><a href="#constructor-summary" tabindex="0">Constructor Summary</a></li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#constructor-detail" tabindex="0">Constructor Details</a>
<ol class="toc-list">
<li><a href="#%3Cinit%3E(java.lang.Iterable)" tabindex="0">ServiceManager(Iterable)</a></li>
</ol>
</li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#addListener(com.google.common.util.concurrent.ServiceManager.Listener,java.util.concurrent.Executor)" tabindex="0">addListener(ServiceManager.Listener, Executor)</a></li>
<li><a href="#startAsync()" tabindex="0">startAsync()</a></li>
<li><a href="#awaitHealthy()" tabindex="0">awaitHealthy()</a></li>
<li><a href="#awaitHealthy(java.time.Duration)" tabindex="0">awaitHealthy(Duration)</a></li>
<li><a href="#awaitHealthy(long,java.util.concurrent.TimeUnit)" tabindex="0">awaitHealthy(long, TimeUnit)</a></li>
<li><a href="#stopAsync()" tabindex="0">stopAsync()</a></li>
<li><a href="#awaitStopped()" tabindex="0">awaitStopped()</a></li>
<li><a href="#awaitStopped(java.time.Duration)" tabindex="0">awaitStopped(Duration)</a></li>
<li><a href="#awaitStopped(long,java.util.concurrent.TimeUnit)" tabindex="0">awaitStopped(long, TimeUnit)</a></li>
<li><a href="#isHealthy()" tabindex="0">isHealthy()</a></li>
<li><a href="#servicesByState()" tabindex="0">servicesByState()</a></li>
<li><a href="#startupTimes()" tabindex="0">startupTimes()</a></li>
<li><a href="#startupDurations()" tabindex="0">startupDurations()</a></li>
<li><a href="#toString()" tabindex="0">toString()</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Class ServiceManager" class="title">Class ServiceManager</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">com.google.common.util.concurrent.ServiceManager</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="annotations"><a href="../../annotations/GwtIncompatible.html" title="annotation in com.google.common.annotations">@GwtIncompatible</a>
</span><span class="modifiers">public final class </span><span class="element-name type-name-label">ServiceManager</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">A manager for monitoring and controlling a set of <a href="Service.html" title="interface in com.google.common.util.concurrent">services</a>. This class
provides methods for <a href="#startAsync()">starting</a>, <a href="#stopAsync()">stopping</a> and
<a href="#servicesByState()">inspecting</a> a collection of <a href="Service.html" title="interface in com.google.common.util.concurrent">services</a>.
Additionally, users can monitor state transitions with the <a href="ServiceManager.Listener.html" title="class in com.google.common.util.concurrent">listener</a>
mechanism.

<p>While it is recommended that service lifecycles be managed via this class, state transitions
initiated via other mechanisms do not impact the correctness of its methods. For example, if the
services are started by some mechanism besides <a href="#startAsync()"><code>startAsync()</code></a>, the listeners will be invoked
when appropriate and <a href="#awaitHealthy()"><code>awaitHealthy()</code></a> will still work as expected.

<p>Here is a simple example of how to use a <code>ServiceManager</code> to start a server.

<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../../resource-files/copy.svg" alt="Copy snippet"></button>
<pre class="snippet" id="snippet-com.google.common.util.concurrent.ServiceManager1"><code class="language-java">class Server {
  public static void main(String[] args) {
    Set&lt;Service&gt; services = ...;
    ServiceManager manager = new ServiceManager(services);
    manager.addListener(new Listener() {
        public void stopped() {}
        public void healthy() {
          // Services have been initialized and are healthy, start accepting requests...
        }
        public void failure(Service service) {
          // Something failed, at this point we could log it, notify a load balancer, or take
          // some other action.  For now we will just exit.
          System.exit(1);
        }
      },
      MoreExecutors.directExecutor());

    Runtime.getRuntime().addShutdownHook(new Thread() {
      public void run() {
        // Give the services 5 seconds to stop to ensure that we are responsive to shutdown
        // requests.
        try {
          manager.stopAsync().awaitStopped(5, TimeUnit.SECONDS);
        } catch (TimeoutException timeout) {
          // stopping timed out
        }
      }
    });
    manager.startAsync();  // start all the services asynchronously
  }
}
</code></pre>
</div>


<p>This class uses the ServiceManager's methods to start all of its services, to respond to
service failure and to ensure that when the JVM is shutting down all the services are stopped.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>14.0</dd>
<dt>Author:</dt>
<dd>Luke Sandberg</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="ServiceManager.Listener.html" class="type-name-link" title="class in com.google.common.util.concurrent">ServiceManager.Listener</a></code></div>
<div class="col-last even-row-color">
<div class="block">A listener for the aggregate state changes of the services that are under management.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(java.lang.Iterable)" class="member-name-link">ServiceManager</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="Service.html" title="interface in com.google.common.util.concurrent">Service</a>&gt;&nbsp;services)</code></div>
<div class="col-last even-row-color">
<div class="block">Constructs a new instance for managing the given services.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addListener(com.google.common.util.concurrent.ServiceManager.Listener,java.util.concurrent.Executor)" class="member-name-link">addListener</a><wbr>(<a href="ServiceManager.Listener.html" title="class in com.google.common.util.concurrent">ServiceManager.Listener</a>&nbsp;listener,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executor.html" title="class or interface in java.util.concurrent" class="external-link">Executor</a>&nbsp;executor)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Registers a <a href="ServiceManager.Listener.html" title="class in com.google.common.util.concurrent"><code>ServiceManager.Listener</code></a> to be <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executor.html#execute(java.lang.Runnable)" title="class or interface in java.util.concurrent" class="external-link">executed</a> on the given
executor.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#awaitHealthy()" class="member-name-link">awaitHealthy</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Waits for the <a href="ServiceManager.html" title="class in com.google.common.util.concurrent"><code>ServiceManager</code></a> to become <a href="#isHealthy()">healthy</a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#awaitHealthy(long,java.util.concurrent.TimeUnit)" class="member-name-link">awaitHealthy</a><wbr>(long&nbsp;timeout,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/TimeUnit.html" title="class or interface in java.util.concurrent" class="external-link">TimeUnit</a>&nbsp;unit)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Waits for the <a href="ServiceManager.html" title="class in com.google.common.util.concurrent"><code>ServiceManager</code></a> to become <a href="#isHealthy()">healthy</a> for no more
than the given time.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#awaitHealthy(java.time.Duration)" class="member-name-link">awaitHealthy</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Duration.html" title="class or interface in java.time" class="external-link">Duration</a>&nbsp;timeout)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Waits for the <a href="ServiceManager.html" title="class in com.google.common.util.concurrent"><code>ServiceManager</code></a> to become <a href="#isHealthy()">healthy</a> for no more
than the given time.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#awaitStopped()" class="member-name-link">awaitStopped</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Waits for the all the services to reach a terminal state.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#awaitStopped(long,java.util.concurrent.TimeUnit)" class="member-name-link">awaitStopped</a><wbr>(long&nbsp;timeout,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/TimeUnit.html" title="class or interface in java.util.concurrent" class="external-link">TimeUnit</a>&nbsp;unit)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Waits for the all the services to reach a terminal state for no more than the given time.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#awaitStopped(java.time.Duration)" class="member-name-link">awaitStopped</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Duration.html" title="class or interface in java.time" class="external-link">Duration</a>&nbsp;timeout)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Waits for the all the services to reach a terminal state for no more than the given time.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isHealthy()" class="member-name-link">isHealthy</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns true if all services are currently in the <a href="Service.State.html#RUNNING">running</a> state.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../collect/ImmutableSetMultimap.html" title="class in com.google.common.collect">ImmutableSetMultimap</a><wbr>&lt;<a href="Service.State.html" title="enum in com.google.common.util.concurrent">Service.State</a>, <a href="Service.html" title="interface in com.google.common.util.concurrent">Service</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#servicesByState()" class="member-name-link">servicesByState</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Provides a snapshot of the current state of all the services under management.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ServiceManager.html" title="class in com.google.common.util.concurrent">ServiceManager</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startAsync()" class="member-name-link">startAsync</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Initiates service <a href="Service.html#startAsync()">startup</a> on all the services being managed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../collect/ImmutableMap.html" title="class in com.google.common.collect">ImmutableMap</a><wbr>&lt;<a href="Service.html" title="interface in com.google.common.util.concurrent">Service</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Duration.html" title="class or interface in java.time" class="external-link">Duration</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startupDurations()" class="member-name-link">startupDurations</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the service load times.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../collect/ImmutableMap.html" title="class in com.google.common.collect">ImmutableMap</a><wbr>&lt;<a href="Service.html" title="interface in com.google.common.util.concurrent">Service</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startupTimes()" class="member-name-link">startupTimes</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the service load times.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="ServiceManager.html" title="class in com.google.common.util.concurrent">ServiceManager</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#stopAsync()" class="member-name-link">stopAsync</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Initiates service <a href="Service.html#stopAsync()">shutdown</a> if necessary on all the services
being managed.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">toString</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#method-summary" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(java.lang.Iterable)">
<h3>ServiceManager</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">ServiceManager</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;? extends <a href="Service.html" title="interface in com.google.common.util.concurrent">Service</a>&gt;&nbsp;services)</span></div>
<div class="block">Constructs a new instance for managing the given services.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>services</code> - The services to manage</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if not all services are <a href="Service.State.html#NEW">new</a> or if there
    are any duplicate services.</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="addListener(com.google.common.util.concurrent.ServiceManager.Listener,java.util.concurrent.Executor)">
<h3>addListener</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">addListener</span><wbr><span class="parameters">(<a href="ServiceManager.Listener.html" title="class in com.google.common.util.concurrent">ServiceManager.Listener</a>&nbsp;listener,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executor.html" title="class or interface in java.util.concurrent" class="external-link">Executor</a>&nbsp;executor)</span></div>
<div class="block">Registers a <a href="ServiceManager.Listener.html" title="class in com.google.common.util.concurrent"><code>ServiceManager.Listener</code></a> to be <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/Executor.html#execute(java.lang.Runnable)" title="class or interface in java.util.concurrent" class="external-link">executed</a> on the given
executor. The listener will not have previous state changes replayed, so it is suggested that
listeners are added before any of the managed services are <a href="Service.html#startAsync()">started</a>.

<p><code>addListener</code> guarantees execution ordering across calls to a given listener but not
across calls to multiple listeners. Specifically, a given listener will have its callbacks
invoked in the same order as the underlying service enters those states. Additionally, at most
one of the listener's callbacks will execute at once. However, multiple listeners' callbacks
may execute concurrently, and listeners may execute in an order different from the one in which
they were registered.

<p>RuntimeExceptions thrown by a listener will be caught and logged. Any exception thrown
during <code>Executor.execute</code> (e.g., a <code>RejectedExecutionException</code>) will be caught and
logged.

<p>When selecting an executor, note that <code>directExecutor</code> is dangerous in some cases. See
the discussion in the <a href="ListenableFuture.html#addListener(java.lang.Runnable,java.util.concurrent.Executor)"><code>ListenableFuture.addListener</code></a>
documentation.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>listener</code> - the listener to run when the manager changes state</dd>
<dd><code>executor</code> - the executor in which the listeners callback methods will be run.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="startAsync()">
<h3>startAsync</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="annotations"><a href="https://errorprone.info/api/latest/com/google/errorprone/annotations/CanIgnoreReturnValue.html" title="class or interface in com.google.errorprone.annotations" class="external-link">@CanIgnoreReturnValue</a>
</span><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ServiceManager.html" title="class in com.google.common.util.concurrent">ServiceManager</a></span>&nbsp;<span class="element-name">startAsync</span>()</div>
<div class="block">Initiates service <a href="Service.html#startAsync()">startup</a> on all the services being managed. It
is only valid to call this method if all of the services are <a href="Service.State.html#NEW">new</a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>this</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if any of the Services are not <a href="Service.State.html#NEW"><code>new</code></a> when the
    method is called.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="awaitHealthy()">
<h3>awaitHealthy</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">awaitHealthy</span>()</div>
<div class="block">Waits for the <a href="ServiceManager.html" title="class in com.google.common.util.concurrent"><code>ServiceManager</code></a> to become <a href="#isHealthy()">healthy</a>. The manager
will become healthy after all the component services have reached the <a href="Service.State.html#RUNNING">running</a> state.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if the service manager reaches a state from which it cannot
    become <a href="#isHealthy()">healthy</a>.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="awaitHealthy(java.time.Duration)">
<h3>awaitHealthy</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">awaitHealthy</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Duration.html" title="class or interface in java.time" class="external-link">Duration</a>&nbsp;timeout)</span>
                  throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/TimeoutException.html" title="class or interface in java.util.concurrent" class="external-link">TimeoutException</a></span></div>
<div class="block">Waits for the <a href="ServiceManager.html" title="class in com.google.common.util.concurrent"><code>ServiceManager</code></a> to become <a href="#isHealthy()">healthy</a> for no more
than the given time. The manager will become healthy after all the component services have
reached the <a href="Service.State.html#RUNNING">running</a> state.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>timeout</code> - the maximum time to wait</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/TimeoutException.html" title="class or interface in java.util.concurrent" class="external-link">TimeoutException</a></code> - if not all of the services have finished starting within the deadline</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if the service manager reaches a state from which it cannot
    become <a href="#isHealthy()">healthy</a>.</dd>
<dt>Since:</dt>
<dd>28.0 (but only since 33.4.0 in the Android flavor)</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="awaitHealthy(long,java.util.concurrent.TimeUnit)">
<h3>awaitHealthy</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">awaitHealthy</span><wbr><span class="parameters">(long&nbsp;timeout,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/TimeUnit.html" title="class or interface in java.util.concurrent" class="external-link">TimeUnit</a>&nbsp;unit)</span>
                  throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/TimeoutException.html" title="class or interface in java.util.concurrent" class="external-link">TimeoutException</a></span></div>
<div class="block">Waits for the <a href="ServiceManager.html" title="class in com.google.common.util.concurrent"><code>ServiceManager</code></a> to become <a href="#isHealthy()">healthy</a> for no more
than the given time. The manager will become healthy after all the component services have
reached the <a href="Service.State.html#RUNNING">running</a> state.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>timeout</code> - the maximum time to wait</dd>
<dd><code>unit</code> - the time unit of the timeout argument</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/TimeoutException.html" title="class or interface in java.util.concurrent" class="external-link">TimeoutException</a></code> - if not all of the services have finished starting within the deadline</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if the service manager reaches a state from which it cannot
    become <a href="#isHealthy()">healthy</a>.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="stopAsync()">
<h3>stopAsync</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="annotations"><a href="https://errorprone.info/api/latest/com/google/errorprone/annotations/CanIgnoreReturnValue.html" title="class or interface in com.google.errorprone.annotations" class="external-link">@CanIgnoreReturnValue</a>
</span><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="ServiceManager.html" title="class in com.google.common.util.concurrent">ServiceManager</a></span>&nbsp;<span class="element-name">stopAsync</span>()</div>
<div class="block">Initiates service <a href="Service.html#stopAsync()">shutdown</a> if necessary on all the services
being managed.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>this</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="awaitStopped()">
<h3>awaitStopped</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">awaitStopped</span>()</div>
<div class="block">Waits for the all the services to reach a terminal state. After this method returns all
services will either be <a href="Service.State.html#TERMINATED">terminated</a> or <a href="Service.State.html#FAILED">failed</a>.</div>
</div>
</section>
</li>
<li>
<section class="detail" id="awaitStopped(java.time.Duration)">
<h3>awaitStopped</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">awaitStopped</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Duration.html" title="class or interface in java.time" class="external-link">Duration</a>&nbsp;timeout)</span>
                  throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/TimeoutException.html" title="class or interface in java.util.concurrent" class="external-link">TimeoutException</a></span></div>
<div class="block">Waits for the all the services to reach a terminal state for no more than the given time. After
this method returns all services will either be <a href="Service.State.html#TERMINATED">terminated</a> or <a href="Service.State.html#FAILED">failed</a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>timeout</code> - the maximum time to wait</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/TimeoutException.html" title="class or interface in java.util.concurrent" class="external-link">TimeoutException</a></code> - if not all of the services have stopped within the deadline</dd>
<dt>Since:</dt>
<dd>28.0 (but only since 33.4.0 in the Android flavor)</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="awaitStopped(long,java.util.concurrent.TimeUnit)">
<h3>awaitStopped</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">awaitStopped</span><wbr><span class="parameters">(long&nbsp;timeout,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/TimeUnit.html" title="class or interface in java.util.concurrent" class="external-link">TimeUnit</a>&nbsp;unit)</span>
                  throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/TimeoutException.html" title="class or interface in java.util.concurrent" class="external-link">TimeoutException</a></span></div>
<div class="block">Waits for the all the services to reach a terminal state for no more than the given time. After
this method returns all services will either be <a href="Service.State.html#TERMINATED">terminated</a> or <a href="Service.State.html#FAILED">failed</a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>timeout</code> - the maximum time to wait</dd>
<dd><code>unit</code> - the time unit of the timeout argument</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/TimeoutException.html" title="class or interface in java.util.concurrent" class="external-link">TimeoutException</a></code> - if not all of the services have stopped within the deadline</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isHealthy()">
<h3>isHealthy</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isHealthy</span>()</div>
<div class="block">Returns true if all services are currently in the <a href="Service.State.html#RUNNING">running</a> state.

<p>Users who want more detailed information should use the <a href="#servicesByState()"><code>servicesByState()</code></a> method to
get detailed information about which services are not running.</div>
</div>
</section>
</li>
<li>
<section class="detail" id="servicesByState()">
<h3>servicesByState</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../collect/ImmutableSetMultimap.html" title="class in com.google.common.collect">ImmutableSetMultimap</a>&lt;<a href="Service.State.html" title="enum in com.google.common.util.concurrent">Service.State</a>, <a href="Service.html" title="interface in com.google.common.util.concurrent">Service</a>&gt;</span>&nbsp;<span class="element-name">servicesByState</span>()</div>
<div class="block">Provides a snapshot of the current state of all the services under management.

<p>N.B. This snapshot is guaranteed to be consistent, i.e. the set of states returned will
correspond to a point in time view of the services.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>29.0 (present with return type <code>ImmutableMultimap</code> since 14.0)</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="startupTimes()">
<h3>startupTimes</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../collect/ImmutableMap.html" title="class in com.google.common.collect">ImmutableMap</a>&lt;<a href="Service.html" title="interface in com.google.common.util.concurrent">Service</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</span>&nbsp;<span class="element-name">startupTimes</span>()</div>
<div class="block">Returns the service load times. This value will only return startup times for services that
have finished starting.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>Map of services and their corresponding startup time in millis, the map entries will be
    ordered by startup time.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="startupDurations()">
<h3>startupDurations</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="annotations"><a href="https://javadoc.io/doc/com.google.j2objc/j2objc-annotations/latest/com/google/j2objc/annotations/J2ObjCIncompatible.html" title="class or interface in com.google.j2objc.annotations" class="external-link">@J2ObjCIncompatible</a>
</span><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../collect/ImmutableMap.html" title="class in com.google.common.collect">ImmutableMap</a>&lt;<a href="Service.html" title="interface in com.google.common.util.concurrent">Service</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Duration.html" title="class or interface in java.time" class="external-link">Duration</a>&gt;</span>&nbsp;<span class="element-name">startupDurations</span>()</div>
<div class="block">Returns the service load times. This value will only return startup times for services that
have finished starting.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>Map of services and their corresponding startup time, the map entries will be ordered
    by startup time.</dd>
<dt>Since:</dt>
<dd>31.0 (but only since 33.4.0 in the Android flavor)</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span>()</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2010&#x2013;2025. All rights reserved.</small></p>
</footer>
</main>
</div>
</body>
</html>
